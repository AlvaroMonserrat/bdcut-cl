{
    "mostrar_comentarios": true,
    "comentarios_var_header": "/*",
    "comentarios_var_post": "*/\n",
    "comentarios": [
        "Este formato est√° escrito para Oracle\n"
    ],
    "variables": {
        "regionesTable": "region",
        "provinciasTable": "provincia",
        "comunasTable": "comuna",
        "regionId": "REGION_ID",
        "regionName": "REGION_NOMBRE",
        "provinciaId": "PROVINCIA_ID",
        "provinciaName": "PROVINCIA_NOMBRE",
        "provinciaRegionId": "PROVINCIA_REGION_ID",
        "comunaId": "COMUNA_ID",
        "comunaName": "COMUNA_NOMBRE",
        "comunaProvinciaId": "COMUNA_PROVINCIA_ID",
        "comunaPk": "comuna_pkey",
        "provinciaPk": "provincia_pkey",
        "regionPk": "region_pkey",
        "comunaProvinciaFk": "comuna_COMUNA_PROVINCIA_ID_fkey",
        "provinciaRegionFk": "provincia_PROVINCIA_REGION_ID_fkey"
    },
    "escape": {
        "'": "''"
    },
    "pre": [
        "DECLARE\n",
    	"\tvl_MsgError VARCHAR2(255);\n",
    	"\teFalloMod EXCEPTION;\n",
	"BEGIN\n",
	"\t-- Table structure for table ${regionesTable}\n",
	"\tDECLARE cnt1 NUMBER;\n",
	"\tBEGIN\n",
	"\t\tSELECT count(*) INTO cnt1 FROM all_tables WHERE table_name = '${regionesTable}';\n",
	"\t\tIF cnt1 = 0 THEN\n",
	"\t\t\tEXECUTE IMMEDIATE 'CREATE TABLE ${regionesTable}\n",
	"\t\t\t\t\t\t\t( ${regionId} number(2) NOT NULL PRIMARY KEY,\n",
	"\t\t\t\t\t\t\t  ${regionName} varchar2(50) NULL\n",
	"\t\t\t\t\t\t\t)';\n",
	"\t\tELSE\n",
	"\t\t\tEXECUTE IMMEDIATE 'DELETE ${comunasTable}';\n",
	"\t\t\tEXECUTE IMMEDIATE 'DELETE ${provinciasTable}';\n",
	"\t\t\tEXECUTE IMMEDIATE 'DELETE ${regionesTable}';\n",
	"\t\tEND IF;\n",
	"\tEXCEPTION\n",
	"\t\tWHEN OTHERS THEN\n",
	"\t\t\tvl_MsgError := 'Error en etapa 1 - estructura tabla ${regionesTable}';\n",
	"\t\t\tRAISE eFalloMod;\n",
	"\tEND;\n",
	"\n",
	"\t-- Table structure for table ${provinciasTable}\n",
	"\tDECLARE cnt2 NUMBER;\n",
	"\tBEGIN\n",
	"\t\tSELECT count(*) INTO cnt2 FROM all_tables WHERE table_name = '${provinciasTable}';\n",
	"\t\tIF cnt2 = 0 THEN\n",
	"\t\t\tEXECUTE IMMEDIATE 'CREATE TABLE ${provinciasTable}\n",
	"\t\t\t\t\t\t (\n",
	"\t\t\t\t\t\t   ${provinciaId} number(3) NOT NULL PRIMARY KEY,\n",
	"\t\t\t\t\t\t   ${provinciaName} varchar2(23) NULL,\n",
	"\t\t\t\t\t\t   ${provinciaRegionId} number(2) NULL,\n",
	"\t\t\t\t\t\t   CONSTRAINT ${provinciaRegionFk}\n",
	"\t\t\t\t\t\t\t   FOREIGN KEY (${provinciaRegionId})\n",
	"\t\t\t\t\t\t\t   REFERENCES ${regionesTable}(REGION_ID)\n",
	"\t\t\t\t\t\t )';\n",
	"\t\tELSE\n",
	"\t\t\tEXECUTE IMMEDIATE 'DELETE ${comunasTable}';\n",
	"\t\t\tEXECUTE IMMEDIATE 'DELETE ${provinciasTable}';\n",
	"\t\t\tEXECUTE IMMEDIATE 'DELETE ${regionesTable}';\n",
	"\t\tEND IF;\n",
	"\tEXCEPTION\n",
	"\t\tWHEN OTHERS THEN\n",
	"\t\t\tvl_MsgError := 'Error en etapa 2 - estructura tabla ${provinciasTable}';\n",
	"\t\t\tRAISE eFalloMod;\n",
	"\tEND;\n",
	"\n",
	"\t-- Table structure for table ${comunasTable}\n",
	"\tDECLARE cnt3 NUMBER;\n",
	"\tBEGIN\n",
	"\t\tSELECT count(*) INTO cnt3 FROM all_tables WHERE table_name = '${comunasTable}';\n",
	"\t\tIF cnt3 = 0 THEN\n",
	"\t\t\tEXECUTE IMMEDIATE 'CREATE TABLE ${comunasTable}\n",
	"\t\t\t\t\t\t(\n",
	"\t\t\t\t\t\t  ${comunaId} number(5) NOT NULL PRIMARY KEY,\n",
	"\t\t\t\t\t\t  ${comunaName} varchar2(20) NULL,\n",
	"\t\t\t\t\t\t  ${comunaProvinciaId} number(3) NULL,\n",
	"\t\t\t\t\t\t  CONSTRAINT ${comunaProvinciaFk}\n",
	"\t\t\t\t\t\t\t  FOREIGN KEY (${comunaProvinciaId})\n",
	"\t\t\t\t\t\t\t  REFERENCES ${provinciasTable}(${provinciaId})\n",
	"\t\t\t\t\t\t)';\n",
	"\t\tELSE\n",
	"\t\t\tEXECUTE IMMEDIATE 'DELETE ${comunasTable}';\n",
	"\t\t\tEXECUTE IMMEDIATE 'DELETE ${provinciasTable}';\n",
	"\t\t\tEXECUTE IMMEDIATE 'DELETE ${regionesTable}';\n",
	"\t\tEND IF;\n",
	"\tEXCEPTION\n",
	"\t\tWHEN OTHERS THEN\n",
	"\t\t\tvl_MsgError := 'Error en etapa 3 - estructura tabla ${comunasTable}';\n",
	"\t\t\tRAISE eFalloMod;\n",
	"\tEND;\n"
    ],
    "pre-regiones":[
    	"\t----------------------------------------------------------------------\n",
    	"\t-- Dumping data for table REGION\n",
    	"\t\tBEGIN\n",
     	"\t\t\tINSERT ALL\n"
    ],
    "regiones": "\t\t\t\tINTO ${regionesTable}(${regionId}, ${regionName}) VALUES(${_id}, '${_name}');\n",
    "post-regiones":[
    	"\t\t\t\tSELECT 1 FROM DUAL;\n",
	"\n",
        "\t\t\tIF SQL%NOTFOUND THEN\n",
        "\t\t\t\tvl_MsgError := 'Error dumping data to table ${regionesTable}';\n",
        "\t\t\t\tRAISE eFalloMod;\n",
        "\t\t\tEND IF;\n",
    	"\t\tEXCEPTION\n",
        "\t\t\tWHEN OTHERS THEN\n",
        "\t\t\tRAISE;\n",
    	"\t\tEND;\n"
    ],
    "pre-provincias": [
        "\t----------------------------------------------------------------------\n",
	"\t-- Dumping data for table ${provinciasTable}\n",
	"\t\tBEGIN\n",
        "\t\t\tINSERT ALL\n"
    ],
    "provincias": "\t\t\t\tINTO ${provinciasTable}(${provinciaId}, ${provinciaName}, ${provinciaRegionId}) VALUES (${_id}, '${_name}', ${_regionId})\n",
    "post-provincias":[
    	"\t\t\t\tSELECT 1 FROM DUAL;\n",
	"\n",
        "\t\t\tIF SQL%NOTFOUND THEN\n",
        "\t\t\t\tvl_MsgError := 'Error dumping data to table ${provinciasTable}';\n",
        "\t\t\t\tRAISE eFalloMod;\n",
        "\t\t\tEND IF;\n",
	"\n",
    	"\t\tEXCEPTION\n",
        "\t\t\tWHEN OTHERS THEN\n",
        "\t\t\t\tRAISE;\n",
    	"\t\tEND;\n"
    ],

    "pre-comunas": [
        "\t----------------------------------------------------------------------\n",
	"\t-- Dumping data for table ${comunasTable}\n",
	"\t\tBEGIN\n",
        "\t\t\tINSERT ALL\n"
    ],
    "comunas": "\t\t\t\tINTO ${comunasTable}(${comunaId}, ${comunaName}, ${comunaProvinciaId}) VALUES (${_id}, '${_name}', ${_provinciaId});\n",
    "post-comunas": [
        "\t\t\t\tSELECT 1 FROM DUAL;\n",
	"\n",
        "\t\t\tIF SQL%NOTFOUND THEN\n",
        "\t\t\t\tvl_MsgError := 'Error dumping data to table COMUNA';\n",
        "\t\t\t\tRAISE eFalloMod;\n",
        "\t\t\tEND IF;\n",
	"\n",
	"\t\tEXCEPTION\n",
        "\t\t\tWHEN OTHERS THEN\n",
        "\t\t\t\tROLLBACK;\n",
        "\t\t\t\tRAISE;\n",
    	"\t\tEND;\n"
    ],
    "post": [
       "END;"
    ]
}
